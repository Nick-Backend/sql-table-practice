
CREATE TYPE user_role AS ENUM (
    'admin',
    'manager',
    'customer'
);

CREATE TYPE user_status AS ENUM (
    'active',
    'blocked',
    'pending'
);

CREATE TABLE users (
    id bigserial NOT NULL PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    email VARCHAR(255) NOT NULL UNIQUE,
    phone VARCHAR(20) UNIQUE,
    password_hash VARCHAR(255) NOT NULL,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    birth_date DATE,
    role user_role NOT NULL,
    status user_status NOT NULL DEFAULT 'pending',
    is_verified BOOLEAN DEFAULT false,
    login_attempts INTEGER DEFAULT 0,
    last_login_at TIMESTAMPTZ,
    created_at TIMESTAMPTZ DEFAULT now(),
    updated_at TIMESTAMPTZ DEFAULT now(),

    CONSTRAINT login_attempts_check CHECK (login_attempts >= 0),
    CONSTRAINT birth_date_check CHECK (birth_date IS NULL OR birth_date < current_date),
    CONSTRAINT username_check CHECK (char_length(username) >= 3)
);

INSERT INTO users (username, email, phone, password_hash, first_name, last_name, birth_date, role, status, is_verified, login_attempts, last_login_at, created_at) VALUES 
('user_1', 'u1@test.com', '+998901000101', 'p1', 'Anvar', 'Soliqov', '1995-01-01', 'admin', 'active', true, 0, now(), now()),
('user_2', 'u2@test.com', '+998901000102', 'p2', 'Dilnoza', 'Hamidova', '1998-02-02', 'manager', 'active', true, 0, now() - interval '1 hour', now()),
('user_3', 'u3@test.com', '+998901000103', 'p3', 'Jasur', 'Bekov', '1992-03-03', 'customer', 'active', true, 0, now() - interval '2 hours', now()),
('user_4', 'u4@test.com', '+998901000104', 'p4', 'Lola', 'Azimova', '2000-04-04', 'customer', 'active', true, 0, now() - interval '1 day', now()),
('user_5', 'u5@test.com', '+998901000105', 'p5', 'Sardor', 'Karimov', '1997-05-05', 'customer', 'active', true, 0, now() - interval '10 mins', now()),
('user_6', 'u6@test.com', '+998901000106', 'p6', 'Guli', 'Rustamova', '1993-06-06', 'manager', 'active', true, 0, now() - interval '3 hours', now()),
('user_7', 'u7@test.com', '+998901000107', 'p7', 'Bekzod', 'Ortiqov', '1992-07-07', 'customer', 'active', true, 0, now() - interval '12 hours', now()),
('user_8', 'u8@test.com', '+998901000108', 'p8', 'Nigora', 'Umarova', '1996-08-08', 'customer', 'pending', false, 1, NULL, now()),
('user_9', 'u9@test.com', '+998901000109', 'p9', 'Botir', 'Ismoilov', '1989-09-09', 'admin', 'active', true, 0, now() - interval '30 mins', now()),
('user_10', 'u10@test.com', '+998901000110', 'p10', 'Malika', 'Saidova', '1994-10-10', 'manager', 'active', true, 0, now() - interval '4 hours', now()),
('user_11', 'u11@test.com', '+998901000111', 'p11', 'Diyor', 'Rustamov', '1991-11-11', 'customer', 'active', true, 0, now(), now()),
('user_12', 'u12@test.com', '+998901000112', 'p12', 'Zuhra', 'Aliyeva', '1999-12-12', 'customer', 'active', true, 0, now() - interval '15 hours', now()),
('user_13', 'u13@test.com', '+998901000113', 'p13', 'Farrux', 'Sobirov', '1997-01-13', 'manager', 'blocked', false, 5, NULL, now()),
('user_14', 'u14@test.com', '+998901000114', 'p14', 'Shaxlo', 'Ganiyeva', '1991-02-14', 'admin', 'active', true, 0, now() - interval '6 hours', now()),
('user_15', 'u15@test.com', '+998901000115', 'p15', 'Rustam', 'Bekov', '1998-03-15', 'customer', 'active', true, 0, now() - interval '20 hours', now()),
('user_16', 'u16@test.com', '+998901000116', 'p16', 'Nozima', 'Qosimova', '1993-04-16', 'manager', 'active', true, 0, now() - interval '8 hours', now()),
('user_17', 'u17@test.com', '+998901000117', 'p17', 'Jamshid', 'Toshov', '1999-05-17', 'customer', 'active', true, 0, now() - interval '45 mins', now()),
('user_18', 'u18@test.com', '+998901000118', 'p18', 'Otabek', 'Nazirov', '1992-06-18', 'customer', 'pending', false, 0, NULL, now()),
('user_19', 'u19@test.com', '+998901000119', 'p19', 'Guzal', 'Odilova', '1994-07-19', 'manager', 'active', true, 0, now() - interval '2 days', now()),
('user_20', 'u20@test.com', '+998901000120', 'p20', 'Jahongir', 'Murodov', '1990-08-20', 'customer', 'active', true, 0, now(), now()),
('user_21', 'u21@test.com', '+998901000121', 'p21', 'Sanjar', 'Karimov', '1987-01-21', 'customer', 'active', true, 0, now(), now()),
('user_22', 'u22@test.com', '+998901000122', 'p22', 'Ziyoda', 'Olimova', '1995-02-22', 'manager', 'active', true, 0, now(), now()),
('user_23', 'u23@test.com', '+998901000123', 'p23', 'Umid', 'Nazarov', '1993-03-23', 'customer', 'active', true, 0, now(), now()),
('user_24', 'u24@test.com', '+998901000124', 'p24', 'Nilufar', 'Dadabaeva', '1991-04-24', 'customer', 'active', true, 0, now(), now()),
('user_25', 'u25@test.com', '+998901000125', 'p25', 'Bobur', 'Mirzo', '1985-05-25', 'admin', 'active', true, 0, now(), now()),
('user_26', 'u26@test.com', '+998901000126', 'p26', 'Kamola', 'Zokirova', '1994-06-26', 'customer', 'active', true, 0, now(), now()),
('user_27', 'u27@test.com', '+998901000127', 'p27', 'Sherzod', 'Omonov', '1992-07-27', 'manager', 'active', true, 0, now(), now()),
('user_28', 'u28@test.com', '+998901000128', 'p28', 'Madina', 'Orifova', '1998-08-28', 'customer', 'active', true, 0, now(), now()),
('user_29', 'u29@test.com', '+998901000129', 'p29', 'Dovud', 'Yusupov', '1990-09-29', 'customer', 'active', true, 0, now(), now()),
('user_30', 'u30@test.com', '+998901000130', 'p30', 'Rayhon', 'Ganiyeva', '1996-10-30', 'customer', 'active', true, 0, now(), now()),
('user_31', 'u31@test.com', '+998901000131', 'p31', 'Aziz', 'Hamidov', '1993-11-01', 'admin', 'active', true, 0, now(), now()),
('user_32', 'u32@test.com', '+998901000132', 'p32', 'Sitora', 'Shokirova', '1997-12-02', 'customer', 'active', true, 0, now(), now()),
('user_33', 'u33@test.com', '+998901000133', 'p33', 'Mansur', 'Hamidov', '1989-01-03', 'manager', 'active', true, 0, now(), now()),
('user_34', 'u34@test.com', '+998901000134', 'p34', 'Iroda', 'Karimova', '1992-02-04', 'customer', 'active', true, 0, now(), now()),
('user_35', 'u35@test.com', '+998901000135', 'p35', 'Elyor', 'Tursunov', '1994-03-05', 'customer', 'active', true, 0, now(), now()),
('user_36', 'u36@test.com', '+998901000136', 'p36', 'Barno', 'Zokirova', '1991-04-06', 'manager', 'active', true, 0, now(), now()),
('user_37', 'u37@test.com', '+998901000137', 'p37', 'Akmal', 'Rasulov', '1988-05-07', 'admin', 'active', true, 0, now(), now()),
('user_38', 'u38@test.com', '+998901000138', 'p38', 'Munira', 'Dadabaeva', '2001-06-08', 'customer', 'active', true, 0, now(), now()),
('user_39', 'u39@test.com', '+998901000139', 'p39', 'Zafar', 'Ergashev', '1995-07-09', 'customer', 'active', true, 0, now(), now()),
('user_40', 'u40@test.com', '+998901000140', 'p40', 'Dildora', 'Yusupova', '1993-08-10', 'manager', 'active', true, 0, now(), now()),
('user_41', 'u41@test.com', '+998901000141', 'p41', 'Omon', 'Tursunov', '1990-01-11', 'customer', 'active', true, 0, now(), now()),
('user_42', 'u42@test.com', '+998901000142', 'p42', 'Sora', 'Bekmirzayeva', '1998-02-12', 'manager', 'active', true, 0, now(), now()),
('user_43', 'u43@gmail.com', '+998901000143', 'p43', 'Bahodir', 'Qodirov', '1992-03-13', 'customer', 'active', true, 0, now(), now()),
('user_44', 'u44@test.com', '+998901000144', 'p44', 'Gulbahor', 'Azizova', '1994-04-14', 'customer', 'active', true, 0, now(), now()),
('user_45', 'u45@test.com', '+998901000145', 'p45', 'Mirali', 'Hasanov', '1996-05-15', 'admin', 'active', true, 0, now(), now()),
('user_46', 'u46@test.com', '+998901000146', 'p46', 'Nodira', 'Bibixatun', '1991-06-16', 'customer', 'active', true, 0, now(), now()),
('user_47', 'u47@test.com', '+998901000147', 'p47', 'Umar', 'Hayyom', '1987-07-17', 'manager', 'active', true, 0, now(), now()),
('user_48', 'u48@test.com', '+998901000148', 'p48', 'Zulfiya', 'Xonim', '1999-08-18', 'customer', 'active', true, 0, now(), now()),
('user_49', 'u49@test.com', '+998901000149', 'p49', 'Hamid', 'Olimjon', '1990-09-19', 'customer', 'active', true, 0, now(), now()),
('user_50', 'u50@test.com', '+998901000150', 'p50', 'Abdulla', 'Qodiriy', '1994-10-20', 'admin', 'active', true, 0, now(), now()),
('user_51', 'u51@test.com', '+998901000151', 'p51', 'Oybek', 'Toshkent', '1992-11-21', 'customer', 'active', true, 0, now(), now()),
('user_52', 'u52@test.com', '+998901000152', 'p52', 'Cho’lpon', 'Abdulhamid', '1995-12-22', 'manager', 'active', true, 0, now(), now()),
('user_53', 'u53@test.com', '+998901000153', 'p53', 'Fitrat', 'Abdurauf', '1991-01-23', 'customer', 'active', true, 0, now(), now()),
('user_54', 'u54@test.com', '+998901000154', 'p54', 'Behbudiy', 'Mahmudxoja', '1989-02-24', 'customer', 'active', true, 0, now(), now()),
('user_55', 'u55@test.com', '+998901000155', 'p55', 'Munavvar', 'Qori', '1996-03-25', 'admin', 'active', true, 0, now(), now()),
('user_56', 'u56@test.com', '+998901000156', 'p56', 'Tursunoy', 'Ahunova', '1993-04-26', 'customer', 'active', true, 0, now(), now()),
('user_57', 'u57@test.com', '+998901000157', 'p57', 'Zinnat', 'Fathullin', '1997-05-27', 'manager', 'active', true, 0, now(), now()),
('user_58', 'u58@test.com', '+998901000158', 'p58', 'Sabohat', 'Azimova', '1991-06-28', 'customer', 'active', true, 0, now(), now()),
('user_59', 'u59@test.com', '+998901000159', 'p59', 'Mavluda', 'Asalxojaeva', '1988-07-29', 'admin', 'active', true, 0, now(), now()),
('user_60', 'u60@test.com', '+998901000160', 'p60', 'Yodgor', 'Sadiev', '1994-08-30', 'customer', 'active', true, 0, now(), now()),
('user_61', 'u61@test.com', '+998901000161', 'p61', 'Ozodbek', 'Nazarbekov', '1992-09-01', 'manager', 'active', true, 0, now(), now()),
('user_62', 'u62@test.com', '+998901000162', 'p62', 'Yulduz', 'Usmonova', '1990-10-02', 'customer', 'active', true, 0, now(), now()),
('user_63', 'u63@test.com', '+998901000163', 'p63', 'Sherali', 'Juraev', '1986-11-03', 'customer', 'active', true, 0, now(), now()),
('user_64', 'u64@test.com', '+998901000164', 'p64', 'Gulsanam', 'Mamazoitova', '1995-12-04', 'admin', 'active', true, 0, now(), now()),
('user_65', 'u65@test.com', '+998901000165', 'p65', 'Munisa', 'Rizaeva', '1993-01-05', 'customer', 'active', true, 0, now(), now()),
('user_66', 'u66@test.com', '+998901000166', 'p66', 'Jahongir', 'Otajonov', '1998-02-06', 'manager', 'active', true, 0, now(), now()),
('user_67', 'u67@test.com', '+998901000167', 'p67', 'Shohjahon', 'Jo’raev', '1991-03-07', 'customer', 'active', true, 0, now(), now()),
('user_68', 'u68@test.com', '+998901000168', 'p68', 'Botir', 'Qodirov', '1989-04-08', 'customer', 'active', true, 0, now(), now()),
('user_69', 'u69@test.com', '+998901000169', 'p69', 'Tohir', 'Sodiqov', '1996-05-09', 'admin', 'active', true, 0, now(), now()),
('user_70', 'u70@test.com', '+998901000170', 'p70', 'Shahzoda', 'Musayeva', '1992-06-10', 'customer', 'active', true, 0, now(), now()),
('user_71', 'u71@test.com', '+998901000171', 'p71', 'Nilufar', 'Usmonova', '1994-07-11', 'manager', 'active', true, 0, now(), now()),
('user_72', 'u72@test.com', '+998901000172', 'p72', 'Sevara', 'Nazarkhon', '1991-08-12', 'customer', 'active', true, 0, now(), now()),
('user_73', 'u73@test.com', '+998901000173', 'p73', 'Sardor', 'Rahimkhon', '1988-09-13', 'customer', 'active', true, 0, now(), now()),
('user_74', 'u74@test.com', '+998901000174', 'p74', 'Ulugbek', 'Rahmatullaev', '1997-10-14', 'admin', 'active', true, 0, now(), now()),
('user_75', 'u75@test.com', '+998901000175', 'p75', 'Ziyoda', 'Qobilova', '1993-11-15', 'customer', 'active', true, 0, now(), now()),
('user_76', 'u76@test.com', '+998901000176', 'p76', 'Jasur', 'Umirov', '1995-12-16', 'manager', 'active', true, 0, now(), now()),
('user_77', 'u77@test.com', '+998901000177', 'p77', 'Malika', 'Egamberdieva', '1992-01-17', 'customer', 'active', true, 0, now(), now()),
('user_78', 'u78@test.com', '+998901000178', 'p78', 'Sanjar', 'Shodiev', '1989-02-18', 'customer', 'active', true, 0, now(), now()),
('user_79', 'u79@test.com', '+998901000179', 'p79', 'Umida', 'Mirzaeva', '1996-03-19', 'admin', 'active', true, 0, now(), now()),
('user_80', 'u80@test.com', '+998901000180', 'p80', 'Hamid', 'Boltaboev', '1991-04-20', 'customer', 'active', true, 0, now(), now()),
('user_81', 'u81@test.com', '+998901000181', 'p81', 'Qobul', 'Ahmedov', '1994-05-21', 'manager', 'active', true, 0, now(), now()),
('user_82', 'u82@test.com', '+998901000182', 'p82', 'Salima', 'Buxorova', '1992-06-22', 'customer', 'active', true, 0, now(), now()),
('user_83', 'u83@test.com', '+998901000183', 'p83', 'Davron', 'Fayziev', '1998-07-23', 'customer', 'active', true, 0, now(), now()),
('user_84', 'u84@test.com', '+998901000184', 'p84', 'Zebo', 'Toshmatova', '1991-08-24', 'admin', 'active', true, 0, now(), now()),
('user_85', 'u85@test.com', '+998901000185', 'p85', 'Orol', 'Murodov', '1987-09-25', 'customer', 'active', true, 0, now(), now()),
('user_86', 'u86@test.com', '+998901000186', 'p86', 'Gulnoza', 'Karimova', '1995-10-26', 'manager', 'active', true, 0, now(), now()),
('user_87', 'u87@test.com', '+998901000187', 'p87', 'Jamshid', 'Abduyev', '1993-11-27', 'customer', 'active', true, 0, now(), now()),
('user_88', 'u88@test.com', '+998901000188', 'p88', 'Dilfuza', 'Gulyamova', '1999-12-28', 'customer', 'active', true, 0, now(), now()),
('user_89', 'u89@test.com', '+998901000189', 'p89', 'Khurshid', 'Aliyev', '1990-01-29', 'admin', 'active', true, 0, now(), now()),
('user_90', 'u90@test.com', '+998901000190', 'p90', 'Mohira', 'Yusupova', '1994-02-28', 'customer', 'active', true, 0, now(), now()),
('user_91', 'u91@test.com', '+998901000191', 'p91', 'Farid', 'Ismatov', '1992-03-01', 'manager', 'active', true, 0, now(), now()),
('user_92', 'u92@test.com', '+998901000192', 'p92', 'Shahlo', 'Rasulova', '1997-04-02', 'customer', 'active', true, 0, now(), now()),
('user_93', 'u93@test.com', '+998901000193', 'p93', 'Elyor', 'Saidov', '1991-05-03', 'customer', 'active', true, 0, now(), now()),
('user_94', 'u94@test.com', '+998901000194', 'p94', 'Nargiza', 'Hakimova', '1989-06-04', 'admin', 'active', true, 0, now(), now()),
('user_95', 'u95@test.com', '+998901000195', 'p95', 'Baxtiyor', 'Sobirov', '1996-07-05', 'customer', 'active', true, 0, now(), now()),
('user_96', 'u96@test.com', '+998901000196', 'p96', 'Zaynab', 'Qodirova', '1993-08-06', 'manager', 'active', true, 0, now(), now()),
('user_97', 'u97@test.com', '+998901000197', 'p97', 'Sherali', 'Omonov', '1995-09-07', 'customer', 'active', true, 0, now(), now()),
('user_98', 'u98@test.com', '+998901000198', 'p98', 'Lolaxon', 'Umarova', '1992-10-08', 'customer', 'active', true, 0, now(), now()),
('user_99', 'u99@test.com', '+998901000199', 'p99', 'Siroj', 'Abduyev', '1988-11-09', 'admin', 'active', true, 0, now(), now()),
('user_100', 'u100@test.com', '+998901000200', 'p100', 'Maloxat', 'Saidova', '1994-12-10', 'customer', 'active', true, 0, now(), now());


